{% extends 'base.html' %}

{% block title %}AI Response Screen{% endblock %}

{% block content %}
<h1>AI Response Screen</h1>

<!-- Tab Filters -->
<div class="email-tabs">
    <button class="tab-button active" data-filter="priority">
        Priority
    </button>
    <button class="tab-button" data-filter="other">
        Other
    </button>
</div>

<!-- Mobile First Email List View -->
<div class="mobile-email-list-container">
    <h2>Emails</h2>
    <ul id="mobile-email-list"></ul>
    <div id="load-more-emails-container">
        <button id="load-more-btn">Load More Emails</button>
    </div>
</div>

<!-- Original Desktop 2x2 Grid -->
<div class="response-grid-container">
    <div class="grid-column">
        <div class="grid-cell emails-panel-container desktop-email-list-panel">
            <h2>Emails (Desktop)</h2>
            <ul id="email-list"></ul>
        </div>
        <div class="grid-cell selected-email-container">
            <h2>Selected Email</h2>
            <div id="selected-email-header"></div>
            <button id="toggle-email-view">Toggle View</button>
            <div id="email-content-view">
                <iframe id="email-html-display"></iframe>
                <pre id="email-plain-display"></pre>
            </div>
        </div>
    </div>
    <div class="grid-column">
        <div class="grid-cell ai-response-panel-container">
            <h2>AI Proposed Response</h2>
            <textarea id="ai-response-area"></textarea>
            <div class="action-buttons">
                <button id="approve-button">Approve & Send</button>
                <button id="delete-button">Delete Email</button>
            </div>
        </div>
        <div class="grid-cell chatbot-interface-container">
            <h3>Adjust Response</h3>
            <div id="chatbot-history"></div>
            <textarea id="chatbot-input" placeholder="Your instructions..."></textarea>
            <button id="chatbot-submit">Submit Instructions</button>
        </div>
    </div>
</div>

<!-- Container for Single Email View (Mobile) -->
<div class="mobile-single-email-view-container">
    <div class="mobile-single-email-top-bar">
        <button id="mobile-back-to-list-btn">Back</button>
        <h3>Email Details</h3>
        <div class="mobile-top-actions">
            <button id="mobile-reply-btn">Reply</button>
            <button id="mobile-delete-btn">Delete</button>
            <button id="mobile-add-to-calendar-btn" title="Add to Calendar (Placeholder)">üóìÔ∏è</button>
            <button id="mobile-add-to-task-btn" title="Add to Tasks (Placeholder)">üìù</button>
        </div>
    </div>

    <div class="mobile-main-content-area">
        <div class="mobile-reply-interface-wrapper">
            
            <div class="mobile-reply-section-b"> <!-- Box B: Title -->
                <h4>Compose Reply:</h4>
            </div>

            <div class="mobile-reply-section-c"> <!-- Box C: AI Suggestion Textarea -->
                <textarea id="mobile-ai-response-area" placeholder="AI-suggested reply..."></textarea>
            </div>

            <div class="mobile-reply-section-d"> <!-- Box D: User Instructions -->
                <textarea id="mobile-user-instructions-input" placeholder="Your instructions to adjust the reply..."></textarea>
            </div>
            
            <!-- Consolidated Actions Bar -->
            <div class="mobile-reply-consolidated-actions">
                <button id="mobile-adjust-reply-btn">Adjust</button>
                <button id="mobile-send-reply-btn">Send</button>
                <button id="mobile-cancel-reply-btn">Cancel</button>
            </div>
        </div>

        <div class="mobile-single-email-content-display">
            <div id="mobile-selected-email-header"></div>
            <iframe id="mobile-email-html-display"></iframe>
            <pre id="mobile-email-plain-display"></pre>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts_extra %}
<script src="{{ url_for('static', filename='js/ai_response.js') }}"></script>
{% endblock %} 